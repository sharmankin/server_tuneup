#!/usr/bin/env bash

cd "$(dirname "$0")" && source ../local_env || exit 20

default_directives='Port 12982
PermitRootLogin no
ClientAliveInterval 5
ClientAliveCountMax 30
PasswordAuthentication no'

#printf '%b' "${default_directives}"

directive_mod() {
  local name value reply

  read -r name value <<<"$1"

  read -r -p "${name}=" reply
  [[ -n $reply ]] && {

    printf '%s' "${name} ${value}"

  } || printf '%s' "$1"
}

while read -r directive ; do
#  new_directives+=("$(directive_mod "${directive}")")
  
  directive_mod "${directive}"

#  read -r name value <<<"$directive"
#
#  read -r -p "${name}=" reply
#  [[ -n $reply ]] && {
#
#    printf '%s\n' "${name} ${value}"
#
#  } || printf '%s\n' "$1"

done < <( printf '%s\n' "${default_directives}" )

[[ -z "${new_directives[*]}" ]] && new_directives="$default_directives"

#printf '%b\n' "${new_directives[@]}" | tee ./nd

#tee /etc/ssh/sshd_config.d/override.conf <<EOF
#
#EOF
